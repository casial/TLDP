<!--DOCTYPE section PUBLIC "-//OASIS//DTD DocBook V4.1//EN"-->
<!-- $Id$ -->

<section id="locales">
  <title id="locales.title">Miestne nastavenia</title>

  <section>
    <title>Princípy miestnych nastavení</title>

    <para>Podpora miestnych nastavení je dnes mimoriadne dôle¾itým faktorom, ktorý charakterizuje
      jednotlivé operaèné systémy. Èasy, keï boli µudia ¹tastní, ¾e to nieèo pí¹e, sú nenávratne
      preè a pou¾ívatelia vy¾adujú podporu svojich miestnych nastavení. V <acronym>GNU</acronym>
      systémoch je táto podpora implementovaná priamo do ¹tandardnej kni¾nice jazyka
      <acronym>C</acronym> -- <acronym>GNU</acronym> libc. Táto podpora je navrhnutá tak, aby
      zohµadòovala v¹etky po¾iadavky kladené na nastavenia pre akúkoµvek krajinu a akýkoµvek
      jazyk.</para>

    <section>
      <title>Ciele a prostriedky</title>

      <para>Rôzne krajiny a kultúry majú odli¹né pravidlá komunikácie. Tieto pravidlá mô¾u by»
	malého rozsahu, napr. formát dátumu a èasu, a¾ po veµmi koplexné ako je jazyk, ktorým
	hovoria.</para>

      <para>Internacionalizácia softvéru znamená programova» ho tak, aby bol schopný pracova» s
	pou¾ivateµovými miestnymi nastaveniami. V <acronym>ISO</acronym> <acronym>C</acronym>
	pracuje internacionalizácia v zmysle <firstterm>locales</firstterm>. Ka¾dé locale (miestne
	nastavenia) ¹pecifikuje skupinu pravidiel, jedno pravidlo pre ka¾dý uèel. U¾ívateµ si zvolí
	skupinu pravidiel ¹pecifikovaním locale (pomocou systémových premenných).</para>

      <para>V¹etky programy dedia nastavené locale v rámci ich prostredia. Pod podmienkou, ¾e
	programy sú napísané tak, ¾e akceptujú nastavené locales, mô¾u sa riadi» pravidlami, ktoré
	uprednostòuje pou¾ívateµ.</para>
    </section>

    <section>
      <title>Kategórie a ich funkcie</title>

      <para>Táto èas» popisuje jednotlivé premenné, ktoré ovplyvòujú miestne nastavenia a ktorými
	sa riadia aj funkcie kni¾nice <acronym>GNU</acronym> libc.</para>

      <para>Nastavenie premennej prostredia sa robí pomocou príkazu shellu
	<screen>
bash$ export LC_PREMENNA=sk

tcsh$ setenv LC_PREMENNA sk
	</screen></para>
    
      <para><envar>LC_PREMENNA</envar> je jedna z nasledujúcich:
	<itemizedlist>
          <listitem>
	    <para><envar>LC_COLLATE</envar> --- Triedenie re»azcov. Nastavením tejto premennej
	      mo¾no prinúti» aplikácie, napr. <command>sort</command>, <command>ls</command> a iné,
	      aby pri porovnávaní re»azcov brali do úvahy miestne rozlo¾enie jednotlivých písmen v
	      abecede. Slovenèina má napríklad hneï niekoµko znakov, ktoré by pri triedení podµa
	      èíselnej hodnoty znaku spôsobovali problémy. Slovenské nastavenia triedenia povedia
	      funkciam <function>strcoll</function> a <function>strxfrm</function>, ¾e napríklad
	      <literal>ch</literal> je jedno písmeno a nasleduje hneï za <literal>h</literal> a nie
	      za <literal>c</literal>, ¾e ¹iroké <literal>ä</literal> nasleduje za dlhým
	      <literal>á</literal> a to zase za obyèajným <literal>a</literal>. Skúste si to na
	      príkaze <command>sort</command>.  Zadajte písmená <literal>cc ch hh</literal>, potom
	      zmeòte <envar>LC_COLLATE</envar> príkazom
	      <screen>
bash$ export LC_COLLATE=sk

tcsh$ setenv LC_COLLATE sk
	      </screen></para>
	    
	  <para>Skúste to so <command>sort</command> znovu a porovnajte výsledok...</para>
	  </listitem>

          <listitem>
	    <para><envar>LC_CTYPE</envar> --- Klasifikácia a prevod znakov, multibyte. Správne
	      nastavenie tejto premennej je nutné pre korektné rozli¹ovanie znakov abecedy
	      jednotlivých jazykov, urèenie èíslic, tzv. bielych znakov, prevod malých písmen na
	      veµké, atï. Najvhodnej¹ie je túto premennú nenastavova» a tým umo¾ni», aby bola jej
	      hodnota prebratá od premenných <envar>LC_ALL</envar> alebo <envar>LANG</envar>
	      (viï ïalej). Ak ale nechcete pou¾íva» slovenské nastavenia, len ma» správne zobrazené
	      slovenské fonty a funkènú slovenskú klávesnicu na konzole aj pod iXami, nastavte iba
	      túto premennú.</para>

	    <warning>
	      <simpara>V¾dy si buïte stopercentne istí, ¾e máte túto premennú nastavenú (buï cez
		<envar>LC_ALL</envar>, <envar>LANG</envar> alebo priamo), lebo inak nemá zmysel
		èíta» ïalej! Ono <quote>klasifikácia a prevod znakov</quote> neznie nejako lákavo,
		ale vedzte, ¾e je to sakramentsky dôle¾ité pre ¾ivot slovenských písmeniek vo va¹om
		Linuxe!</simpara>
	    </warning>
	  </listitem>

	  <listitem>
	    <para><simplelist type="inline"><member><envar>LC_MONETARY</envar></member>
	      <member><envar>LC_NUMERIC</envar></member></simplelist> --- Formát peòa¾ných a
	      èíselných hodnôt.  Umo¾òuje meni» skupinu nastavení, ktoré sa pou¾ijú pri formátovaní
	      peòa¾ných hodnôt alebo v¹etkých ostatných èíselných hodnôt. Sú to desatinná èiarka,
	      oddeµovaè tisícov, zoskupovanie èíslic, znamienka pre kladné a zaporné hodnoty,
	      atï.</para>
          </listitem>

	  <listitem>
	    <para><envar>LC_TIME</envar> --- Formátovanie dátumu a èasu. Nastavenia oddeµovaèov
	      medzi hodinami, minútami a sekundami, názvy dní, poradie rok, mesiac a deò v dátume,
	      ...</para>
          </listitem>

	  <listitem>
	    <para><envar>LC_MESSAGES</envar> --- Výber jazyka, pou¾itého u¾ívateµským rozhraním na
	      preklad hlá¹ok programov. Toto je presne tá premenná, ktorá prinúti aplikácie hovori»
	      po slovensky. Viï ïal¹ie kapitoly.</para>
          </listitem>
	</itemizedlist>
      </para>

      <para>S prekladom hlásení programov, hlavne s umiestnením súborov s prelo¾enými re»azcami,
	súvisí premenná <envar>NLSPATH</envar>. Mala by obsahova» dvojbodkami oddelený zoznam
	adresárov, v ktorých sa budú hµada» <filename>.mo</filename> súbory pre miestne nastavenia
	dané premennou <envar>LC_MESSAGES</envar>. Premennú <envar>NLSPATH</envar> je v¹ak
	potrebné nastavova» len vo výnimoèných prípadoch, preto¾e aplikácie hµadajú preklady svojich
	hlásení v ¹tandardných adresároch pre tieto súbory.</para>

      <para>Okrem týchto premenných bolo implementovaných niekoµko ïal¹ích, ktoré zatiaµ nie sú
	zdokumentované (<citetitle>The GNU C Library Reference Manual</citetitle>). Ich význam je
	zrejmý z názvu, tak¾e uvediem aj svoju dedukciu.</para>

      <itemizedlist>
	<listitem>
	  <simpara><envar>LC_PAPER</envar> --- Formát papiera. V na¹ich zemepisných ¹írkach sa
	    napríklad pou¾íva formát <acronym>A4</acronym>, v Amerike je to
	    Letter, atï. Pozor, táto premenná neobsahuje priamo názov formátu, ale (tak, ako v¹etky
	    <envar>LC_</envar> premenné), skratku miestneho nastavenia, teda u nás to bude
	    <constant>sk</constant>. Ak by sme chceli pou¾íva» formát Letter, museli by sme túto
	    premennú nastavi» na kód miestneho nastavenia niektorej z krajín, ktorá pou¾íva takýto
	    formát, napríklad <constant>us</constant>. V tomto prípade je nutné nain¹talova» balík s
	    miestnymi nastaveniami pre túto krajinu (<application>locales-us</application>).
	    </simpara>
	</listitem>

	<listitem>
	  <simpara><envar>LC_NAME</envar> --- Formát mena a priezviska. U nás má ka¾dý dve mená,
	    pí¹u sa v poradí meno, priezvisko. V Rusku majú zase tri mená v poradí meno,
	    otcovo-meno, priezvisko. V Maïarsku majú dve mená tak ako u nás, ale pí¹u sa v opaènom
	    poradí. O tom je táto premenná. Asi...</simpara>
	</listitem>

	<listitem>
	  <simpara><envar>LC_ADDRESS</envar> --- Spôsob zápisu adresy. Poradie ulice a popisného
	    èísla domu, ZIP kód, PSÈ apod.</simpara>
	</listitem>

	<listitem>
	  <simpara><envar>LC_TELEPHONE</envar> --- Formát telefónnych a faxových èísel.  Urèuje
	    zoskupovanie èíslic, ich oddelovanie, poèet èísel predvoµby, ...</simpara>
	</listitem>

	<listitem>
	  <simpara><envar>LC_MEASUREMENT</envar> --- Miery. Jednotky hmotnosti, objemu, teploty a
	    då¾ky, pou¾ívané v tej ktorej krajine. Program napísaný v <acronym>USA</acronym> bude
	    pravdepodobne poèíta» s galónmi vody, ale ak je správne napísaný, s premennou
	    <envar>LC_MEASUREMENT</envar> nastavenou na <quote>sk</quote> bude zobrazova» litre v
	    správnom pomere. To isté platí napríklad pre prevod teploty vo Fahrenheitovej stupnici
	    na stupne Celsia.</simpara>
	</listitem>

	<listitem>
	  <simpara><envar>LC_IDENTIFICATION</envar> --- Az apád, tak toto neviem. Rodné èíslo?
	    Èíslo sociálneho poistenia? Èíslo topánok?</simpara>
	</listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Ïal¹ie premenné</title>
  
      <itemizedlist>
	<listitem>
	  <simpara><envar>LC_ALL</envar> --- Ak je táto premenná nastavená, pou¾ije sa jej hodnota
	    pre v¹etky vy¹¹ie spomenuté skupiny locales, bez ohµadu na hodnotu príslu¹ných
	    premenných.</simpara>
	</listitem>

	<listitem>
	  <simpara><envar>LANG</envar> --- Hodnota tejto premennej sa pou¾ije pre tie skupiny
	    locales, ktoré nemajú príslu¹nú premennú nastavenú.</simpara>
	</listitem>

	<listitem>
	  <simpara><envar>LANGUAGE</envar> --- Alternatívne miestne nastavenia. Táto premenná mô¾e
	    obsahova» usporiadaný zoznam kódov miestnych nastavení oddelených dvojbodkami. Súbory s
	    prekladmi hlá¹ok programov sa budú hµada» v poradí, v akom sú urèené v tomto zozname. Ak
	    sa nepodarí nájs» súbor s prelo¾enými hlá¹kami programu v jednom jazyku, pou¾ije sa
	    súbor pre nasledujúci jazyk v zozname <envar>LANGUAGE</envar>.  Navy¹e, ak sa súbor pre
	    prvý jazyk aj nájde, ale niektorý re»azec z neho nie je prelo¾ený, nepou¾ije sa pôvodný
	    (anglický), ale najskôr sa pokúsi nájs» preklad daného re»azca v súbore pre ïal¹í jazyk
	    v zozname <envar>LANGUAGE</envar>.  To je výhodné pre µudí, ktorí okrem svojho jazyka
	    ovládajú nejaký iný lep¹ie ako angliètinu, v ktorej sú zvyèajne programy originálne
	    napísané. Napríklad Slovák by mohol ma» nastavené
	    <computeroutput>LANGUAGE="sk:cz"</computeroutput> a Szolvák z Komárom zase
	    <computeroutput>LANGUAGE="hu:sk"</computeroutput>.</simpara>

	  <caution>
	    <simpara>Premenná <envar>LANGUAGE</envar> ovplyvòuje len premennú
	      <envar>LC_MESSAGES</envar>! Pre správnu funkciu je nutné nastavi» aj ostatné premenné
	      (minimálne <envar>LC_CTYPE</envar>).</simpara>
	  </caution>
	</listitem>

	<listitem>
	  <para><envar>LINGUAS</envar> --- Táto premenná nemá ¹peciálny význam z hµadiska
	    <acronym>GNU</acronym> libc, ale zvykne sa pou¾íva» pri in¹talácii programov (zo
	    zdrojákov). Medzerami oddelený zoznam kódov miestnych nastavení urèuje jazyky, pre ktoré
	    si u¾ívateµ ¾elá in¹talova» preklady re»azcov aplikácie. Príklad:
	    <screen>
bash$ export LINGUAS="sk cz"
bash$ ./configure
bash$ make install
	    </screen></para>

	  <simpara>Tieto príkazy skompilujú a nain¹talujú aplikáciu s podporou slovenèiny a èe¹tiny.
	    In¹talaèné skripty obvykle tie¾ kontrolujú obsah premenných <envar>LANG</envar> a
	    <envar>LC_ALL</envar>, tieto ale mô¾u obsahova» len jeden kód miestnych
	    nastavení.</simpara>
	</listitem>

	<listitem>
	  <para><envar>RPM_INSTALL_LANG</envar> --- Èastej¹ie ako zo zdrojového kódu sa aplikácie
	    in¹talujú z rôznych balíkov (rpm, deb, ...). Kvôli ¹etreniu miestom na disku (a logike
	    -- málokto ovláda tridsa» reèí) je v <acronym>RPM4</acronym> mo¾né urèi» jazyk, ktorého
	    prelo¾ené hlá¹ky sa budú in¹talova». Preto odporúèam do súboru
	    <filename>.bash_profile</filename> (<filename>.login</filename>) u¾ívateµa, ktorý
	    in¹taluje balíky (root), vlo¾i» nasledovný riadok:
	    <screen>
bash$ export RPM_INSTALL_LANG=sk

tcsh$ setenv RPM_INSTALL_LANG "sk"
	    </screen></para>

	  <simpara>Ak sa vám nebodaj stane taká vec, ¾e nain¹talujete celý operaèný systém a a¾
	    potom sa dozviete o tejto premennej (tak, ako sa to stalo aj mne), skúste skript uvedený
	    v èasti <xref linkend="apps-rpm4" endterm="apps-rpm4.title">.</simpara>
	</listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Priorita premenných</title>

      <para>Miestne nastavenia sa urèujú zo spomenutých premenných, prièom tieto sa vyhodnocujú v
	tomto poradí:
	<simplelist>
	  <member><envar>LANGUAGE</envar> --- ovplyvòuje len <envar>LC_MESSAGES</envar>
	  </member>
	  <member><envar>LC_ALL</envar></member>
	  <member><envar>LC_*</envar></member>
	  <member><envar>LANG</envar></member>
	</simplelist></para>

      <para>To znamená asi toµko, ¾e keï raz nastavíte <envar>LC_ALL</envar>, jednotlivé
	premenné <envar>LC_*</envar> sa u¾ neberú do úvahy. Na druhej strane, ak máte
	napríklad nastavené len niektoré z <envar>LC_*</envar>, ostatné sa nastavia na hodnotu
	premennej <envar>LANG</envar>.</para>
    </section>

    <section>
      <title>Kódy miestnych nastavení</title>

      <para>Premenné, ktoré ovplyvòujú miestne nastavenia, sa napåòajú kódmi miestnych nastavení.
	Kódy miestnych nastavení sú re»azce, ktorých formát sa riadi niekoµkými pravidlami.
	V¹eobecný tvar je:
	<synopsis>
jazyk[_územie[.kódovanie]][@modifikátor]
	</synopsis></para>
      
      <para><envar>jazyk</envar> je napr. <constant>sk</constant> pre slovenèinu,
	<constant>cs</constant> pre èe¹tinu, <constant>hu</constant> pre maïarèinu, územie je
	<constant>SK</constant> pre Slovensko, <constant>CZ</constant> pre Èeskú republiku,
	<constant>HU</constant> pre Maïarsko, kódovanie je <constant>ISO-8859-2</constant> pre
	v¹etky stredoeurópske jazyky (je mo¾ne pou¾i» niekoµko formátov na zadanie kódovania) a
	modifikátor slu¾i na povolenie alebo zakázanie niektorých funkcií. Tie sú dané v definíciach
	miestnych nastavení. Napríklad, pre Veµkú Britániu je modifikátorom re»azec
	<constant>euro</constant> a pri jeho pou¾ití sa ako peòa¾ná mena bude pou¾íva» euro namiesto
	libry. To znamená, ¾e sa musí pou¾i» kódovanie <constant>iso-8859-15</constant>, ktoré
	definuje znaky euro a cent.</para>

      <para>Príklady kódov miestnych nastavení (ka¾dý z týchto re»azcov je mo¾né priradi» premenným
	miestnych nastavení, ale najèastej¹ie sa pou¾ívajú len dvojpísmenkové skratky v poslednom
	ståpci):
	<table>
	  <title>Príklady kódov miestnych nastavení</title>
	  <tgroup cols="4" align="left" colsep="1" rowsep="1">
	    <tbody>
	      <row>
		<entry>sk_SK.ISO-8859-2</entry>
		<entry>sk_SK</entry>
		<entry></entry>
		<entry>sk</entry>
	      </row>
	      <row>
		<entry>cs_CZ.ISO-8859-2</entry>
		<entry>cs_CZ@-ch</entry>
		<entry>cs@-ch</entry>
		<entry>cs</entry>
	      </row>
	      <row>
		<entry>en_GB.iso8859</entry>
		<entry>en_GB</entry>
		<entry>en@euro</entry>
		<entry>en</entry>
	      </row>
	      <row>
		<entry>ja_JP.ujis</entry>
		<entry>ja_JP.EUC</entry>
		<entry>ja_JP</entry>
		<entry>ja</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</table></para>

      <para>Nemali by sme zabudnú» na dve ¹tandardné locales, ktoré sa pou¾ijú, ak nie sú systémové
	premenné nastavené a programy ich pou¾ívajú do doby, kým sa inicializuje lokalizácia.
	Tvrdím, ¾e sa pou¾ijú obe, preto¾e momentálne sú toto¾né, ale v budúcnosti sa mô¾u v tejto
	oblasti ¹tandardy <acronym>ISO</acronym> <acronym>C</acronym> a <acronym>POSIX</acronym>
	odli¹ova» a potom to bude zále¾a» na konfigurácii systému.
	<simplelist>
	  <member><constant>C</constant> --- nastavenia podµa ¹tandardu <acronym>ISO</acronym>
	    <acronym>C</acronym>.</member>

	  <member><constant>POSIX</constant> --- nastavenia podµa ¹tandardu
	    <acronym>POSIX</acronym>. V súèasnosti je to alias pre nastavenia
	    <constant>C</constant>.</member>
	</simplelist></para>
    </section>
  </section> <!-- locales-principles -->

  <section id="locales-slovakia">
    <title>Miestne nastavenia pre Slovensko</title>

    <para>V prvom rade treba nain¹talova» balík s podporou miestnych nastavení, ktorý má názov
      <application>locales</application> a tie¾ balík s podporou priamo pre Slovensko ---
      <application>locales-sk</application>. Ak máte záujem pou¾íva» aj podporu pre nejaký iný jazyk
      (na na¹om území je aktuálna najmä èe¹tina a maïarèina), musíte tie¾ nain¹talova» balíky pre
      tieto jazyky.</para>

    <para>V druhom rade si musíte nain¹talova» balíky s podporou miestnych nastavení a priamo
      slovenèiny (sú to <application>locales</application> a <application>locales-sk</application>).
      </para>

    <para>V ïal¹om kroku si nezabudnite nain¹talova» balíky <application>locales</application> a
      <application>locales-sk</application>. Takisto, pre ka¾dý jazyk, ktorý sa chystáte pou¾íva»,
      si nain¹talujte balík s podporou miestnych nastavení.</para>

    <para>V prípade problémov s miestnymi nastaveniami sa dr¾te predchádzajúcich troch krokov.
      </para>

    <section>
      <title>Súbory s miestnymi nastaveniami</title>

      <para>Prejdime sa teraz trochu po na¹ich adresároch. Prvý nav¹tívime <filename
	class="directory">/usr/share/locale/sk</filename>. Na prvý pohµad vidno, ¾e adresár a
	súbory v tomto adresári majú mená toto¾né s premennými, pomocou ktorých sa nastavujú
	jednotlivé kategórie miestnych nastavení.  Je to preto, lebo práve z týchto súborov sa
	naèítajú nastavenia, keï je daná premenná nastavená na hodnotu <constant>sk</constant>.
	Okrem nich tu mô¾e by» e¹te súbor <filename>charset</filename>, ktorý obsahuje len jeden
	riadok s re»azcom <computeroutput>iso-8859-2</computeroutput>. Ten hovorí, aké kódovanie
	znakov sa má pou¾i» pre dané miestne nastavenia.</para>

      <para>V¹etky súbory v tomto adresári sú binárne dáta a adresár <envar>LC_MESSAGES</envar>
	obsahuje súbory, ktorých mená sú toto¾né s názvami niektorých balíkov nain¹talovaných na
	va¹om systéme, s príponou mo. Sú to preklady re»azcov z jednotlivých aplikácií. O nich si
	povieme neskôr. Teraz by sme mohli zisti», èo vlastne obsahujú súbory <envar>LC_*</envar>.
        </para>

      <para>Presuòme sa do adresára <filename class="directory">/usr/share/i18n/</filename>. Tu, v
	textovom súbore <filename>sk_SK</filename> v podadresári
	<filename class="directory">locales/</filename> sa koneène nachádzajú slovenské miestne
	nastavenia v èitateµnej (a editovateµnej) forme. Súbory v tomto adresári majú presne danú
	¹truktúru, ktorá je popísaná v manuálovej stránke locale(5). Pre be¾ného pou¾ívateµa nemá
	zmysel meni» nastavenia v tomto súbore, keï¾e ide o ¹tandardné nastavenia, ktoré sa
	pou¾ívajú na celom Slovensku. Ale, proti Gustovi ¾iadna putika! Ak sa teda rozhodnete zmeni»
	nieèo v tomto súbore, musíte aktualizova» súbory v prvom spomínanom adresári
	<filename class="directory">/usr/share/locales/sk/</filename> príkazom, ktorý údaje v súbore
	<filename>sk_SK</filename> skompiluje a ulo¾í do súborov
	<simplelist type="inline">
	  <member><envar>LC_COLLATE</envar></member>
	  <member><envar>LC_CTYPE</envar></member>
	  <member>...</member>
	</simplelist>
	<programlisting>
sh$ localedef -i sk_SK -f ISO-8859-2 sk_SK
	</programlisting></para>
    
      <para>V podadresári <filename class="directory">/usr/share/i18n/charmaps/</filename> sa
	nachádzajú súbory s popismi jednotlivých kódovani znakov. Pre Slovensko je aktuálny
	<filename>ISO-8859-2</filename> (èo je aj obsah spomínaneho súboru
	<filename>charset</filename>).</para>
    
      <para>V adresári <filename class="directory">/usr/share/locale/</filename> sa nachádza súbor
	<filename>locale.alias</filename>, ktorý definuje tzv. <firstterm>aliasy</firstterm> pre
	kódy miestnych nastavení. Pre správnu funkciu slovenských miestnych nastavení by mal
	obsahova» tieto dva riadky:
	<programlisting>
sk              sk_SK.ISO-8859-2
slovak          sk_SK.ISO-8859-2
	</programlisting></para>
    
      <para>To zabezpeèí, ¾e aj keï nezadáte kódovanie znakov, bude pou¾ité iso-8859-2. Druhý riadok
	má na svedomí to, ¾e namiesto sk mo¾no zada» slovak.</para>

      <warning>
	<simpara>Ale na aliasy typu <constant>slovak</constant> si dávajte bacha! Niektoré
	  aplikácie, ktoré v súvislosti s miestnymi nastaveniami nevyu¾ívajú slu¾by libc, toti¾ na
	  aliasy ka¹µú a zaujímajú ich len prvé dva znaky nastavených premenných. A tak sa zo
	  <constant>slovak</constant> stane <constant>sl</constant>, èo je Slovinsko. Pozitívne je,
	  ¾e pre slovenèinu mô¾ete nastavi» premennú napríklad na hodnotu
	  <constant>skaderukaskadenoha</constant>.</simpara>
      </warning>
    </section>

    <section>
      <title>Konfigurácia miestnych nastavení</title>
    
      <para>Nastavenia internacionalizácie sa (v <systemitem class="osname">RedHat</systemitem> a
	<systemitem class="osname">Mandrake</systemitem>) nachádzajú v súbore
	<filename>/etc/sysconfig/i18n</filename>. Je to veµmi u¾itoèný súbor, ktorý si rýchlo
	obµúbite. Mo¾no v òom nastavi» v¹etko, èo sa kedy týkalo internacionalizácie, národných
	fontov a rozlo¾ení kláves.  Tento súbor v¹ak len definuje systémové premenné a zvykne sa
	vklada» (<computeroutput>source  /etc/sysconfig/i18n</computeroutput>) do inicializaèných
	skriptov.  Exportovanie premenných (odovzdanie ostatným aplikáciám) má na starosti skript
	<filename>/etc/profile.d/lang.sh</filename> (<application>bash</application>) alebo
	<filename>/etc/profile.d/lang.csh</filename> (<application>tcsh</application>). Tento sa
	vykoná pri ka¾dom ¹tarte shellu, typicky je volaný z <filename>/etc/profile</filename>
	(<application>bash</application>) alebo <filename>/etc/csh.cshrc</filename>
	(<application>tcsh</application>).</para>

      <para>Súbor <filename>/etc/sysconfig/i18n</filename> definuje nastavenia pre celý systém.
	Tieto sa pou¾ijú, ak sa nenájde súbor s u¾ívateµovými nastaveniami. Ka¾dý u¾ívateµ si mô¾e
	urèi» svoje vlastné nastavenia v súbore <filename>.i18n</filename> v jeho domovskom
	adresári.  Nastavenia sa v¾dy èítajú len z jedného z týchto súborov, teda ak má u¾ívateµ
	svoj vlastný súbor <filename>&tilde;/.i18n</filename>, nastavenia zo súboru
	<filename class="directory">/etc/sysconfig/i18n</filename> sa ignorujú.</para>

      <para>U¾ívateµ si mô¾e zmeni» nastavenia aj ruène, kedykoµvek sa mu zachce, nastavením
	premenných prostredia
	<simplelist type="inline">
	  <member><envar>LC_MESSAGES</envar></member>
	  <member><envar>LANG</envar></member>
	  <member>atï.</member>
	</simplelist></para>
	
      <para>Vypnú» nejaké nastavenie je mo¾né príkazom
	<screen>
sh$ unset LC_MESSAGES LANG
	</screen></para>

      <para>Tým sa zru¹ia nastavenia daných premenných (a pou¾ije sa ¹tandardné locale
	<constant>C</constant> alebo <constant>POSIX</constant>).</para>
      
      <para>Ak máte napríklad nastavené premenné <computeroutput>LC_ALL=sk</computeroutput> a
	<computeroutput>LC_MESSAGES=cz</computeroutput>, tak po príkaze <computeroutput>unset
	LC_ALL</computeroutput> nebudete ma» hlásenia programov v angliètine, ale èe¹tine. Preto, ak
	chcete vypnú» nejaké nastavenia, v¾dy musíte príkazom unset zru¹i» nastavenia v¹etkých
	premenných, ktoré mô¾u ovplyvòova» dané miestne nastavenia.</para>

      <note>
	<title>export/setenv</title>

	<para>Neodpustím si malú poznámku k príkazu <command>export</command>. Je to vstavaná
	  funkcia v¹etkých shellov kompatibilných s klasickým <application>sh</application> (teda aj
	  <application>bash</application>). Pre shelly typu <application>tcsh</application> je
	  ekvivalentom príkaz <command>setenv</command>.</para>

	<para>Je dôle¾ité uvedomi» si, èo presne tento príkaz robí s premennými. V dokumentácii k
	  bashu sa hovorí, ¾e <command>export</command> oznaèí premennú, aby bola odovzdaná detským
	  (<foreignphrase>child</foreignphrase>) procesom v rámci prostredia
	  (<foreignphrase>environment</foreignphrase>). To znamená asi toµko, ¾e keï spustíte napr.
	  iXy z materského procesu <systemitem class="resource">bash</systemitem>, ktorý pri ¹tarte
	  exportoval premennú <computeroutput>LANG=sk</computeroutput>, v¹etky aplikácie v prostredí
	  <application>X Window System</application> budú dedi» toto nastavenie a teda (ak to sami
	  podporujú) budú fungova» po slovensky. Ak budete chcie» spusti» aplikáciu bez slovenských
	  nastavení, musíte v <application>xterme</application> zada» príkaz <computeroutput>unset
	  LANG</computeroutput> (<computeroutput>unsetenv LANG</computeroutput> pre
	  <application>tcsh</application>), èím pre v¹etky detské procesy
	  <application>xtermu</application> (presnej¹ie shellu, ktorý je v òom spustený), zru¹íte
	  nastavenie premennej <envar>LANG</envar>. Potom aplikácie spustené priamo z tohto xtermu
	  budú fungova» bez podpory slovenèiny. Trochu sa s tým pohrajte.</para>
      </note>
    </section>

    <section>
      <title>Nastavenie èasovej zóny</title>

      <para>S miestnymi nastaveniami úzko súvisí aj nastavenie èasovej zóny. Vedel by som o tom
	rozpráva» celé hodiny, ale ono by to muselo by» zlo¾itej¹ie ako len nastavenie jednej
	premennej... A to takto:
	<screen>
bash$ export TZ="Europe/Bratislava"

tcsh$ setenv TZ "Europe/Bratislava"
	</screen></para>

      <para>Toto nastavenie ovplyvòuje len èasový posun oproti hardverovým hodinám.  (Mimochodom,
	odporúèam hardverové hodiny nastavené na greenwichský svetový èas, èím tie¾ odpadajú
	problémy s prechodom medzi letným a zimným èasom atï. ale o tom sú popísané iné súbory.)
	Toto celé je dos» dobrá vec, hlavne ak mate prístup k poèítaèu v inej èasovej zóne, ale
	chcete pracova» s èasom v stredoeurópskej zóne. Do svojho súboru
	<filename>.bash_profile</filename> (<filename>.login</filename> pre
	<application>tcsh</application>) vlo¾te vy¹¹ie uvedený riadok.</para>
    </section>
  </section> <!-- locales-slovakia -->

  <section id="locales-examples">
    <title>Príklady miestnych nastavení</title>
    
    <itemizedlist>
      <listitem>
	<para>U¾ívateµ je síce zo stredného Slovenska, ale u¾ keï s ním bola jeho mama tehotná,
	  pú¹»ala mu do brucha kurzy angliètiny. Nemá teda zmysel pou¾íva» slovenské nastavenia, a¾
	  na krajné prípady, napr. slovenské fonty v <application>Gimpe</application>. Darujte mu
	  súbor <filename>.i18n</filename> s nasledovným obsahom (aj na takéto malé oné potrebuje
	  <application>locales-sk</application>):
	  <screen>
LC_CTYPE=sk
	  </screen></para>
      </listitem>

      <listitem>
	<para>U¾ívateµ je normálny, má rád svoj materinský jazyk, ale netrápi ho, keï má polovicu
	  aplikácií po slovensky a polovicu po anglicky. Po èesky vie. Toto ho pote¹í (nezabudnite
	  mu potajomky nain¹talova» aj <application>locales-cs</application>):
	  <screen>
LANGUAGE=sk:cs
LANG=sk
	  </screen></para>
      </listitem>

      <listitem>
	<para>U¾ívateµ je z blízkeho juhu, jeho obµúbené pleso je Balaton, v¹etky hlá¹ky chce po
	  maïarsky, ak sa inak nedá, pochopí aj slovenèinu. Nesmieme zabudnú» na jeho miernu
	  schizofreniu, prièom jedno jeho ja potrebuje slovenské triedenie re»azcov a druhé nevie
	  ¾i» bez formátovania dátumu a èasu v èe¹tine. Nikdy sa nesmie zabudnú» na in¹taláciu
	  prekladov hlá¹ok pre maïarèinu, èe¹tinu a slovenèinu z balíkov, ktoré podporujú premennú
	  LINGUAS. Treba ho tie¾ presvedèi», ¾e in¹talácia
	  <application>locales-{sk,hu,cs}</application> nepredstavuje bezpeènostné riziko:
	  <screen>
LANGUAGE=hu:sk:cs
LC_COLLATE=sk
LC_TIME=cs
LANG=hu
LINGUAS="hu cs sk"
	  </screen></para>
      </listitem>
    </itemizedlist>
  </section> <!-- locales-examples -->
</section> <!-- locales -->

